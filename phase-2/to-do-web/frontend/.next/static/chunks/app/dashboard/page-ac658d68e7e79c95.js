(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{1446:function(e,t,n){Promise.resolve().then(n.bind(n,7059))},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},7059:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(7437),r=n(2265),a=n(1443),o=n(9376);let c="https://raima-123-qureshi-to-do-fullstack.hf.space";async function i(e,t){let n=(0,a.LP)(),s={...null==t?void 0:t.headers,"Content-Type":"application/json"};n&&(s.Authorization="Bearer ".concat(n));let r=await fetch(e,{...t,headers:s});if(!r.ok)throw Error((await r.json()).detail||"Something went wrong");return r}async function l(){return(await i("".concat(c,"/api/tasks"))).json()}async function u(e){return(await i("".concat(c,"/api/tasks"),{method:"POST",body:JSON.stringify({description:e})})).json()}async function d(e,t){return(await i("".concat(c,"/api/tasks/").concat(e),{method:"PUT",body:JSON.stringify({description:t})})).json()}async function p(e){return(await i("".concat(c,"/api/tasks/").concat(e,"/complete"),{method:"PATCH"})).json()}async function f(e){await i("".concat(c,"/api/tasks/").concat(e),{method:"DELETE"})}function h(e){let{task:t,onToggleComplete:n,onDelete:a,onEdit:o}=e,[c,i]=(0,r.useState)(!1),[l,u]=(0,r.useState)(t.description),d=()=>{l.trim()!==t.description&&o(t.id,l.trim()),i(!1)},p=()=>{u(t.description),i(!1)};return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg shadow",children:[(0,s.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.is_complete,onChange:()=>n(t.id),className:"w-6 h-6 text-purple-600 bg-gray-600 border-gray-500 rounded focus:ring-purple-500"}),c?(0,s.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),className:"ml-4 flex-grow p-2 bg-gray-600 border border-gray-500 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500",onBlur:d,onKeyPress:e=>{"Enter"===e.key&&d(),"Escape"===e.key&&p()},autoFocus:!0}):(0,s.jsx)("span",{className:"ml-4 text-lg ".concat(t.is_complete?"line-through text-gray-400":"text-white"),onDoubleClick:()=>i(!0),children:t.description})]}),(0,s.jsx)("div",{className:"flex items-center space-x-3 ml-4",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:d,className:"text-green-400 hover:text-green-300 font-semibold",children:"Save"}),(0,s.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-300",children:"Cancel"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>i(!0),className:"text-blue-400 hover:text-blue-300",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>a(t.id),className:"text-red-400 hover:text-red-300",children:"Delete"})]})})]})}function g(e){let{tasks:t,onToggleComplete:n,onDelete:r,onEdit:a}=e;return(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6",children:0===t.length?(0,s.jsx)("p",{className:"text-center text-gray-400",children:"No tasks yet. Add one above!"}):(0,s.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,s.jsx)(h,{task:e,onToggleComplete:n,onDelete:r,onEdit:a},e.id))})})}var m=n(9064);function x(){let[e,t]=(0,r.useState)(""),[n,c]=(0,r.useState)([]),[i,h]=(0,r.useState)(!0),x=(0,o.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=await l();c(e)}catch(e){m.ZP.error(e.message||"Failed to fetch tasks."),("Invalid token"===e.message||"Not authenticated"===e.message)&&x.push("/login")}finally{h(!1)}})()},[x]);let y=async n=>{if(n.preventDefault(),e.trim())try{let n=await u(e);c(e=>[...e,n]),t(""),m.ZP.success("Task created successfully!")}catch(e){m.ZP.error(e.message||"Failed to create task.")}},b=async e=>{try{let t=await p(e);c(n=>n.map(n=>n.id===e?t:n)),m.ZP.success("Task updated successfully!")}catch(e){m.ZP.error(e.message||"Failed to update task.")}},v=async e=>{try{await f(e),c(t=>t.filter(t=>t.id!==e)),m.ZP.success("Task deleted successfully!")}catch(e){m.ZP.error(e.message||"Failed to delete task.")}},j=async(e,t)=>{try{let n=await d(e,t);c(t=>t.map(t=>t.id===e?n:t)),m.ZP.success("Task updated successfully!")}catch(e){m.ZP.error(e.message||"Failed to edit task.")}};return i?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-2xl font-semibold",children:"Loading tasks..."})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,s.jsx)(m.Toaster,{position:"top-center",reverseOrder:!1}),(0,s.jsxs)("header",{className:"bg-gray-800 p-4 flex justify-between items-center shadow-md",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-purple-400",children:"Dashboard"}),(0,s.jsx)("button",{onClick:()=>{(0,a.gy)(),m.ZP.success("Logged out successfully!"),x.push("/login")},className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300",children:"Log Out"})]}),(0,s.jsx)("main",{className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("form",{onSubmit:y,className:"mb-8 flex gap-4",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"What needs to be done?",className:"flex-grow p-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,s.jsx)("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition duration-300",children:"Add Task"})]}),(0,s.jsx)(g,{tasks:n,onToggleComplete:b,onDelete:v,onEdit:j})]})})]})}},1443:function(e,t,n){"use strict";function s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)e[s]=n[s]}return e}n.d(t,{LP:function(){return c},gy:function(){return i},mB:function(){return o}});var r=function e(t,n){function r(e,r,a){if("undefined"!=typeof document){"number"==typeof(a=s({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in a)a[c]&&(o+="; "+c,!0!==a[c]&&(o+="="+a[c].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],s={},r=0;r<n.length;r++){var a=n[r].split("="),o=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(s[c]=t.read(o,c),e===c)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){r(e,"",s({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,s({},this.attributes,t))},withConverter:function(t){return e(s({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let a="authToken";function o(e){r.set(a,e,{expires:1,secure:!0})}function c(){return r.get(a)||null}function i(){r.remove(a)}}},function(e){e.O(0,[64,971,117,744],function(){return e(e.s=1446)}),_N_E=e.O()}]);